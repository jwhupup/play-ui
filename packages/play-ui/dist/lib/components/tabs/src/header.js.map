{"version":3,"file":"header.js","sources":["../../../../../src/components/tabs/src/header.tsx"],"sourcesContent":["import { computed, defineComponent, inject, nextTick, onMounted, ref } from 'vue'\r\nimport type { ButtonProps } from '../../button'\r\nimport Button from '../../button'\r\nimport { PL_TAB_KEY } from '.'\r\n\r\nexport interface TabHeader extends ButtonProps {\r\n  id: number\r\n  name?: string\r\n}\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    const { currentPaneId, headers, position } = inject(PL_TAB_KEY)!\r\n    const btnsWrpper = ref<HTMLElement>()\r\n    const btns = ref<HTMLElement[]>()\r\n\r\n    const thumbStyle = computed(() => {\r\n      if (!btns.value)\r\n        return\r\n\r\n      if (position.value === 'top') {\r\n        const width = `${btns.value[currentPaneId.value].clientWidth}px`\r\n        const transform = `translateX(${btns.value[currentPaneId.value].offsetLeft}px)`\r\n        return {\r\n          width,\r\n          transform,\r\n        }\r\n      }\r\n      const height = `${btns.value[currentPaneId.value].clientHeight}px`\r\n      const transform = `translateY(${btns.value[currentPaneId.value].offsetTop}px)`\r\n\r\n      return {\r\n        height,\r\n        transform,\r\n      }\r\n    })\r\n\r\n    onMounted(() => {\r\n      nextTick(() => {\r\n        btns.value = Array.from(btnsWrpper.value!.children) as HTMLElement[]\r\n      })\r\n    })\r\n\r\n    const onClick = (id: number) => {\r\n      return () => currentPaneId.value = id\r\n    }\r\n\r\n    const renderHeaderButton = (hd: TabHeader) => (\r\n      <Button\r\n        {...hd}\r\n        type='link'\r\n        state={currentPaneId.value === hd.id ? 'primary' : 'info'}\r\n        onClick={onClick(hd.id)}\r\n      >\r\n        {hd.name}\r\n      </Button>\r\n    )\r\n\r\n    return () => (\r\n      <div class={['pl-tabs-header', position.value]}>\r\n        <div\r\n          ref={btnsWrpper}\r\n          class={['pl-tabs-button', position.value]}\r\n        >\r\n          {headers.value.map(hd => renderHeaderButton(hd))}\r\n        </div>\r\n        <div class={['pl-tabs-slideway', position.value]}>\r\n          <div class='pl-tabs-thumb' style={thumbStyle.value}/>\r\n        </div>\r\n      </div>\r\n    )\r\n  },\r\n})\r\n"],"names":["defineComponent","inject","PL_TAB_KEY","ref","computed","transform","onMounted","nextTick","_createVNode","Button","_mergeProps"],"mappings":";;;;;AAIA,MAAe,SAAgBA,oCAAgB;AAAA,EAC7C,QAAQ;AACN,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,IACN,IAAQC,IAAAA,OAAOC,MAAAA,UAAU;AACrB,UAAM,aAAaC,IAAAA;AACnB,UAAM,OAAOA,IAAAA;AACb,UAAM,aAAaC,IAAAA,SAAS,MAAM;AAChC,UAAI,CAAC,KAAK;AAAO;AACjB,UAAI,SAAS,UAAU,OAAO;AAC5B,cAAM,QAAQ,GAAG,KAAK,MAAM,cAAc,KAAK,EAAE;AACjD,cAAMC,aAAY,cAAc,KAAK,MAAM,cAAc,KAAK,EAAE;AAChE,eAAO;AAAA,UACL;AAAA,UACA,WAAAA;AAAA,QACV;AAAA,MACO;AACD,YAAM,SAAS,GAAG,KAAK,MAAM,cAAc,KAAK,EAAE;AAClD,YAAM,YAAY,cAAc,KAAK,MAAM,cAAc,KAAK,EAAE;AAChE,aAAO;AAAA,QACL;AAAA,QACA;AAAA,MACR;AAAA,IACA,CAAK;AACDC,QAAAA,UAAU,MAAM;AACdC,UAAAA,SAAS,MAAM;AACb,aAAK,QAAQ,MAAM,KAAK,WAAW,MAAM,QAAQ;AAAA,MACzD,CAAO;AAAA,IACP,CAAK;AACD,UAAM,UAAU,QAAM;AACpB,aAAO,MAAM,cAAc,QAAQ;AAAA,IACzC;AACI,UAAM,qBAAqB,QAAMC,IAAAA,YAAaC,QAAAA,UAAQC,IAAAA,WAAY,IAAI;AAAA,MACpE,QAAQ;AAAA,MACR,SAAS,cAAc,UAAU,GAAG,KAAK,YAAY;AAAA,MACrD,WAAW,QAAQ,GAAG,EAAE;AAAA,IAC9B,CAAK,GAAG;AAAA,MACF,SAAS,MAAM,CAAC,GAAG,IAAI;AAAA,IAC7B,CAAK;AACD,WAAO,MAAMF,IAAY,YAAC,OAAO;AAAA,MAC/B,SAAS,CAAC,kBAAkB,SAAS,KAAK;AAAA,IAChD,GAAO,CAACA,IAAY,YAAC,OAAO;AAAA,MACtB,OAAO;AAAA,MACP,SAAS,CAAC,kBAAkB,SAAS,KAAK;AAAA,IAC3C,GAAE,CAAC,QAAQ,MAAM,IAAI,QAAM,mBAAmB,EAAE,CAAC,CAAC,CAAC,GAAGA,IAAAA,YAAa,OAAO;AAAA,MACzE,SAAS,CAAC,oBAAoB,SAAS,KAAK;AAAA,IAClD,GAAO,CAACA,IAAY,YAAC,OAAO;AAAA,MACtB,SAAS;AAAA,MACT,SAAS,WAAW;AAAA,IAC1B,GAAO,IAAI,CAAC,CAAC,CAAC,CAAC;AAAA,EACZ;AACH,CAAC;;"}