{"version":3,"file":"index.js","sources":["../../../../../src/components/pagination/src/index.tsx"],"sourcesContent":["import type { PropType, Ref } from 'vue'\r\nimport { computed, defineComponent, ref, watchEffect } from 'vue'\r\nimport { useCount, useExpose } from '../../../composables'\r\nimport { range } from '../../../utils'\r\nimport type { ButtonShape, ButtonType } from '../../button'\r\nimport Button from '../../button'\r\n\r\nexport type PaginationInstance = HTMLElement & {\r\n  current: Ref<number>\r\n  prev: (step?: number) => any\r\n  next: (step?: number) => any\r\n  toggle: (value?: number) => any\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'Pagination',\r\n  props: {\r\n    count: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    showCount: {\r\n      type: Number,\r\n      default: 7,\r\n    },\r\n    type: {\r\n      type: String as PropType<ButtonType>,\r\n      default: 'ghost',\r\n    },\r\n    shape: {\r\n      type: String as PropType<ButtonShape>,\r\n      default: 'rounded',\r\n    },\r\n  },\r\n  setup(props) {\r\n    const count = computed(() => range(2, props.count - 1, 1))\r\n    const max = computed(() => count.value.length + 2)\r\n\r\n    const {\r\n      count: current,\r\n      add: next,\r\n      sub: prev,\r\n      update: toggle,\r\n    } = useCount({\r\n      initial: 1,\r\n      min: 1,\r\n      max,\r\n    })\r\n\r\n    useExpose({\r\n      current,\r\n      next,\r\n      prev,\r\n      toggle,\r\n    })\r\n\r\n    const start = ref(0)\r\n    const end = ref(props.showCount - 3)\r\n    const isShowLeftFold = computed(() => current.value * 2 - 1 > props.showCount)\r\n    const isShowRightFold = computed(() => (props.count - current.value) * 2 - 1 >= props.showCount)\r\n    const onPrev = () => prev()\r\n    const onNext = () => next()\r\n    const onStepPrev = () => prev(end.value - start.value - 1)\r\n    const onStepNext = () => next(end.value - start.value)\r\n    const onPageNo = (no: number) => () => current.value = no\r\n    const onToggle = (evt: FocusEvent) => {\r\n      toggle(parseInt((evt.target as HTMLInputElement).value))\r\n    }\r\n\r\n    watchEffect(() => {\r\n      if (isShowLeftFold.value && isShowRightFold.value) {\r\n        const currentIndex = count.value.findIndex(value => value === current.value)\r\n        const float = (props.showCount - 3) / 2\r\n        start.value = currentIndex - float\r\n        end.value = currentIndex + float + 1\r\n      }\r\n      else if (isShowLeftFold.value) {\r\n        start.value = count.value.length - props.showCount + 1\r\n        end.value = count.value.length\r\n      }\r\n      else if (isShowRightFold.value) {\r\n        start.value = 0\r\n        end.value = props.showCount - 2\r\n      }\r\n    })\r\n\r\n    return () => (\r\n      <div v-show={props.count > 1}>\r\n        <Button\r\n          size='mini'\r\n          state='info'\r\n          iconLeft='chevron-left'\r\n          type={props.type}\r\n          shape={props.shape}\r\n          onClick={onPrev}\r\n        />\r\n        <Button\r\n          size='mini'\r\n          type={props.type}\r\n          shape={props.shape}\r\n          state={current.value === 1 ? 'primary' : 'info'}\r\n          onClick={onPageNo(1)}\r\n        >\r\n          1\r\n        </Button>\r\n        <Button\r\n          size='mini'\r\n          state='info'\r\n          iconLeft='three-dots'\r\n          type={props.type}\r\n          shape={props.shape}\r\n          v-show={isShowLeftFold.value}\r\n          onClick={onStepPrev}\r\n        />\r\n        {\r\n          count.value\r\n            ?.slice(start.value, end.value)\r\n            .map(pageNo => (\r\n              <Button\r\n                size='mini'\r\n                type={props.type}\r\n                shape={props.shape}\r\n                state={current.value === pageNo ? 'primary' : 'info'}\r\n                onClick={onPageNo(pageNo)}\r\n              >\r\n                {pageNo}\r\n              </Button>\r\n            ))\r\n        }\r\n        <Button\r\n          size='mini'\r\n          state='info'\r\n          iconLeft='three-dots'\r\n          type={props.type}\r\n          shape={props.shape}\r\n          v-show={isShowRightFold.value}\r\n          onClick={onStepNext}\r\n        />\r\n        <Button\r\n          size='mini'\r\n          type={props.type}\r\n          shape={props.shape}\r\n          state={current.value === props.count ? 'primary' : 'info'}\r\n          onClick={onPageNo(props.count)}\r\n        >\r\n          {props.count}\r\n        </Button>\r\n        <Button\r\n          size='mini'\r\n          state='info'\r\n          iconLeft='chevron-right'\r\n          type={props.type}\r\n          shape={props.shape}\r\n          onClick={onNext}\r\n        />\r\n        to <input type=\"number\" onBlur={onToggle} />\r\n      </div>\r\n    )\r\n  },\r\n})\r\n"],"names":["_isVNode","defineComponent","computed","range","useCount","useExpose","ref","watchEffect","_withDirectives","_createVNode","Button","_createTextVNode","_vShow"],"mappings":";;;;;;;AAKA,SAAS,QAAQ,GAAG;AAClB,SAAO,OAAO,MAAM,cAAc,OAAO,UAAU,SAAS,KAAK,CAAC,MAAM,qBAAqB,CAACA,IAAQ,QAAC,CAAC;AAC1G;AACA,MAAe,aAAgBC,oCAAgB;AAAA,EAC7C,MAAM;AAAA,EACN,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACF;AAAA,EACD,MAAM,OAAO;AACX,UAAM,QAAQC,aAAS,MAAMC,YAAM,GAAG,MAAM,QAAQ,GAAG,CAAC,CAAC;AACzD,UAAM,MAAMD,IAAAA,SAAS,MAAM,MAAM,MAAM,SAAS,CAAC;AACjD,UAAM;AAAA,MACJ,OAAO;AAAA,MACP,KAAK;AAAA,MACL,KAAK;AAAA,MACL,QAAQ;AAAA,IACT,IAAGE,kBAAS;AAAA,MACX,SAAS;AAAA,MACT,KAAK;AAAA,MACL;AAAA,IACN,CAAK;AACDC,wBAAU;AAAA,MACR;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACN,CAAK;AACD,UAAM,QAAQC,QAAI,CAAC;AACnB,UAAM,MAAMA,IAAG,IAAC,MAAM,YAAY,CAAC;AACnC,UAAM,iBAAiBJ,aAAS,MAAM,QAAQ,QAAQ,IAAI,IAAI,MAAM,SAAS;AAC7E,UAAM,kBAAkBA,IAAAA,SAAS,OAAO,MAAM,QAAQ,QAAQ,SAAS,IAAI,KAAK,MAAM,SAAS;AAC/F,UAAM,SAAS,MAAM;AACrB,UAAM,SAAS,MAAM;AACrB,UAAM,aAAa,MAAM,KAAK,IAAI,QAAQ,MAAM,QAAQ,CAAC;AACzD,UAAM,aAAa,MAAM,KAAK,IAAI,QAAQ,MAAM,KAAK;AACrD,UAAM,WAAW,QAAM,MAAM,QAAQ,QAAQ;AAC7C,UAAM,WAAW,SAAO;AACtB,aAAO,SAAS,IAAI,OAAO,KAAK,CAAC;AAAA,IACvC;AACIK,QAAAA,YAAY,MAAM;AAChB,UAAI,eAAe,SAAS,gBAAgB,OAAO;AACjD,cAAM,eAAe,MAAM,MAAM,UAAU,WAAS,UAAU,QAAQ,KAAK;AAC3E,cAAM,SAAS,MAAM,YAAY,KAAK;AACtC,cAAM,QAAQ,eAAe;AAC7B,YAAI,QAAQ,eAAe,QAAQ;AAAA,MAC3C,WAAiB,eAAe,OAAO;AAC/B,cAAM,QAAQ,MAAM,MAAM,SAAS,MAAM,YAAY;AACrD,YAAI,QAAQ,MAAM,MAAM;AAAA,MAChC,WAAiB,gBAAgB,OAAO;AAChC,cAAM,QAAQ;AACd,YAAI,QAAQ,MAAM,YAAY;AAAA,MAC/B;AAAA,IACP,CAAK;AACD,WAAO,MAAA;;AAAMC,iBAAe,eAACC,gBAAa,OAAO,MAAM,CAACA,IAAY,YAACC,kBAAQ;AAAA,QAC3E,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,QACf,WAAW;AAAA,MACjB,GAAO,IAAI,GAAGD,IAAY,YAACC,kBAAQ;AAAA,QAC7B,QAAQ;AAAA,QACR,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,QACf,SAAS,QAAQ,UAAU,IAAI,YAAY;AAAA,QAC3C,WAAW,SAAS,CAAC;AAAA,MAC3B,GAAO;AAAA,QACD,SAAS,MAAM,CAACC,oBAAiB,GAAG,CAAC;AAAA,MAC3C,CAAK,GAAGH,IAAAA,eAAgBC,IAAY,YAACC,kBAAQ;AAAA,QACvC,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,QACf,WAAW;AAAA,MACjB,GAAO,IAAI,GAAG,CAAC,CAACE,IAAM,OAAE,eAAe,KAAK,CAAC,CAAC,IAAG,WAAM,UAAN,mBAAa,MAAM,MAAM,OAAO,IAAI,OAAO,IAAI,YAAUH,IAAY,YAACC,kBAAQ;AAAA,QACzH,QAAQ;AAAA,QACR,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,QACf,SAAS,QAAQ,UAAU,SAAS,YAAY;AAAA,QAChD,WAAW,SAAS,MAAM;AAAA,MAChC,GAAO,QAAQ,MAAM,IAAI,SAAS;AAAA,QAC5B,SAAS,MAAM,CAAC,MAAM;AAAA,MACvB,CAAA,IAAIF,IAAAA,eAAgBC,IAAY,YAACC,kBAAQ;AAAA,QACxC,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,QACf,WAAW;AAAA,MACjB,GAAO,IAAI,GAAG,CAAC,CAACE,WAAQ,gBAAgB,KAAK,CAAC,CAAC,GAAGH,IAAY,YAACC,kBAAQ;AAAA,QACjE,QAAQ;AAAA,QACR,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,QACf,SAAS,QAAQ,UAAU,MAAM,QAAQ,YAAY;AAAA,QACrD,WAAW,SAAS,MAAM,KAAK;AAAA,MACrC,GAAO;AAAA,QACD,SAAS,MAAM,CAAC,MAAM,KAAK;AAAA,MACjC,CAAK,GAAGD,IAAY,YAACC,kBAAQ;AAAA,QACvB,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,QACf,WAAW;AAAA,MACjB,GAAO,IAAI,GAAGC,IAAgB,gBAAC,KAAK,GAAGF,IAAAA,YAAa,SAAS;AAAA,QACvD,QAAQ;AAAA,QACR,UAAU;AAAA,MAChB,GAAO,IAAI,CAAC,CAAC,GAAG,CAAC,CAACG,IAAAA,OAAQ,MAAM,QAAQ,CAAC,CAAC,CAAC;AAAA;AAAA,EACxC;AACH,CAAC;;"}