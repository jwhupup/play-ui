{"version":3,"file":"index.js","sources":["../../../../../src/components/dropdown/src/index.tsx"],"sourcesContent":["import { type ExtractPropTypes, type PropType, defineComponent } from 'vue'\r\nimport { type Placement } from '@popperjs/core'\r\nimport Dropdown from '..'\r\nimport Button from '../../button'\r\nimport Badge from '../../badge'\r\nimport Popover from '../../popover'\r\nimport type { ButtonProps } from '../../button'\r\nimport type { BadgeProps } from '../../badge'\r\n\r\nexport type DropdownProps = ExtractPropTypes<typeof dropdownProps>\r\n\r\nexport interface DropdownData {\r\n  name: string\r\n  title?: string\r\n  divider?: boolean\r\n  disabled?: boolean\r\n  button?: Partial<Pick<ButtonProps, 'state' | 'type' | 'iconLeft' | 'iconRight'> & { badge: BadgeProps }>\r\n  callback?: () => void\r\n  children?: DropdownData[]\r\n}\r\n\r\nconst dropdownProps = {\r\n  placement: {\r\n    type: String as PropType<Placement>,\r\n    default: 'bottom',\r\n  },\r\n  trigger: {\r\n    type: String as PropType<'hover' | 'click'>,\r\n    default: 'hover',\r\n  },\r\n  data: {\r\n    type: Array as PropType<any[]>,\r\n    default: () => [],\r\n  },\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'Dropdown',\r\n  props: dropdownProps,\r\n  setup(props, { slots }) {\r\n    const onClick = (item: DropdownData) => {\r\n      return (evt: MouseEvent) => {\r\n        if (item.callback)\r\n          item.callback()\r\n\r\n        if (!item.children) {\r\n          evt.stopPropagation()\r\n          document.documentElement.click()\r\n        }\r\n      }\r\n    }\r\n\r\n    const renderMenuButton = (item: DropdownData) => (\r\n      <Button\r\n        type=\"ghost\"\r\n        state=\"info\"\r\n        disabled={item.disabled}\r\n        onClick={onClick(item)}\r\n        {...item.button}\r\n      >\r\n        <div class=\"pl-dropdown-button\">\r\n          {item.name}\r\n          {item.button?.badge && <Badge {...item.button.badge} />}\r\n        </div>\r\n      </Button>\r\n    )\r\n\r\n    const renderNormalMenuButton = (item: DropdownData) => (\r\n      <>\r\n        {item.title && <div class=\"pl-dropdown-title\">{item.title}</div>}\r\n          {renderMenuButton(item)}\r\n        {item.divider && <div class=\"pl-dropdown-divider\" />}\r\n      </>\r\n    )\r\n\r\n    const renderDropdown = () => (\r\n      <div class=\"pl-dropdown-menu\">\r\n        {\r\n          props.data.map((item) => {\r\n            if (item.children) {\r\n              return (\r\n                <Dropdown\r\n                  class=\"pl-dropdown-child\"\r\n                  data={item.children}\r\n                  trigger={props.trigger}\r\n                  placement=\"right\"\r\n                  v-slots={{\r\n                    reference: renderMenuButton(item),\r\n                  }}\r\n                />\r\n              )\r\n            }\r\n            return renderNormalMenuButton(item)\r\n          })\r\n        }\r\n      </div>\r\n    )\r\n\r\n    return () => (\r\n      <Popover\r\n        v-slots={{\r\n          reference: slots.reference,\r\n          headless: slots.headless || renderDropdown,\r\n        }}\r\n        {...props}\r\n      />\r\n    )\r\n  },\r\n})\r\n"],"names":["defineComponent","_createVNode","Button","_mergeProps","Badge","_Fragment","Dropdown","Popover"],"mappings":";;;;;;;AAMA,MAAM,gBAAgB;AAAA,EACpB,WAAW;AAAA,IACT,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA,EACD,SAAS;AAAA,IACP,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACJ,MAAM;AAAA,IACN,SAAS,MAAM,CAAE;AAAA,EAClB;AACH;AACA,MAAe,WAAgBA,oCAAgB;AAAA,EAC7C,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM,OAAO;AAAA,IACX;AAAA,EACJ,GAAK;AACD,UAAM,UAAU,UAAQ;AACtB,aAAO,SAAO;AACZ,YAAI,KAAK;AAAU,eAAK,SAAQ;AAChC,YAAI,CAAC,KAAK,UAAU;AAClB,cAAI,gBAAe;AACnB,mBAAS,gBAAgB;QAC1B;AAAA,MACT;AAAA,IACA;AACI,UAAM,mBAAmB,UAAQC,gBAAaC,QAAAA,UAAQC,IAAAA,WAAY;AAAA,MAChE,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,YAAY,KAAK;AAAA,MACjB,WAAW,QAAQ,IAAI;AAAA,IAC7B,GAAO,KAAK,MAAM,GAAG;AAAA,MACf,SAAS,MAAA;;AAAM,gBAACF,IAAY,YAAC,OAAO;AAAA,UAClC,SAAS;AAAA,QACV,GAAE,CAAC,KAAK,QAAM,UAAK,WAAL,mBAAa,UAASA,IAAAA,YAAaG,QAAK,SAAE,KAAK,OAAO,OAAO,IAAI,CAAC,CAAC,CAAC;AAAA;AAAA,IACzF,CAAK;AACD,UAAM,yBAAyB,UAAQH,IAAAA,YAAaI,IAAS,UAAE,MAAM,CAAC,KAAK,SAASJ,IAAY,YAAC,OAAO;AAAA,MACtG,SAAS;AAAA,IACV,GAAE,CAAC,KAAK,KAAK,CAAC,GAAG,iBAAiB,IAAI,GAAG,KAAK,WAAWA,IAAY,YAAC,OAAO;AAAA,MAC5E,SAAS;AAAA,IACf,GAAO,IAAI,CAAC,CAAC;AACT,UAAM,iBAAiB,MAAMA,IAAY,YAAC,OAAO;AAAA,MAC/C,SAAS;AAAA,IACV,GAAE,CAAC,MAAM,KAAK,IAAI,UAAQ;AACzB,UAAI,KAAK,UAAU;AACjB,eAAOA,IAAAA,YAAaK,QAAAA,YAAU;AAAA,UAC5B,SAAS;AAAA,UACT,QAAQ,KAAK;AAAA,UACb,WAAW,MAAM;AAAA,UACjB,aAAa;AAAA,QACvB,GAAW;AAAA,UACD,WAAW,iBAAiB,IAAI;AAAA,QAC1C,CAAS;AAAA,MACF;AACD,aAAO,uBAAuB,IAAI;AAAA,IACnC,CAAA,CAAC,CAAC;AACH,WAAO,MAAML,IAAAA,YAAaM,MAAO,WAAE,OAAO;AAAA,MACxC,WAAW,MAAM;AAAA,MACjB,UAAU,MAAM,YAAY;AAAA,IAClC,CAAK;AAAA,EACF;AACH,CAAC;;"}