{"version":3,"file":"index.js","sources":["../../../../../src/components/message/src/index.tsx"],"sourcesContent":["import { type ExtractPropTypes, type PropType } from 'vue'\r\nimport { Transition, computed, createVNode, defineComponent, isVNode, render } from 'vue'\r\nimport { isFunction, isObject } from '@vue/shared'\r\nimport { useToggle } from '../../../composables'\r\nimport { animation } from '../../../utils'\r\nimport { type ComponentState } from '../../component'\r\nimport Alert from '../../alert'\r\n\r\ntype ShakeOffProp = 'x-button'\r\nexport type MessageProps = Partial<ExtractPropTypes<typeof messageProps>>\r\n\r\nconst messageProps = {\r\n  content: String,\r\n  shakeOff: {\r\n    type: Array as PropType<ShakeOffProp[]>,\r\n    default: () => [],\r\n  },\r\n  state: {\r\n    type: String as PropType<Exclude<ComponentState, 'primary'>>,\r\n    default: 'info',\r\n  },\r\n  autoClose: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n}\r\n\r\nexport const MessageConstructor = defineComponent({\r\n  name: 'Message',\r\n  props: messageProps,\r\n  setup(props, { slots }) {\r\n    const message = useToggle()\r\n\r\n    message.open()\r\n\r\n    props.autoClose && message.close({ delay: 3000 })\r\n\r\n    const icon = computed(() => {\r\n      const icons = {\r\n        info: 'info-circle',\r\n        success: 'check-circle',\r\n        warning: 'exclamation-triangle',\r\n        danger: 'x-circle',\r\n      }\r\n      return icons[props.state]\r\n    })\r\n\r\n    const renderNotification = () => (\r\n      <Alert\r\n        type='solid'\r\n        icon={icon.value}\r\n        state={props.state}\r\n        description={props.content}\r\n        closable\r\n      />\r\n    )\r\n\r\n    return () => (\r\n      <Transition\r\n        enter-active-class={animation('slideInDown')}\r\n        leave-active-class={animation('slideOutUp')}\r\n        appear\r\n      >\r\n        {\r\n          message.state.value\r\n            ? slots.headless?.()[0]\r\n              ?? renderNotification()\r\n            : null\r\n        }\r\n      </Transition>\r\n    )\r\n  },\r\n})\r\n\r\nlet messagesContainer: HTMLDivElement | null = null\r\n\r\nexport default (options?: MessageProps) => {\r\n  if (!messagesContainer) {\r\n    messagesContainer = document.createElement('div')\r\n    messagesContainer.className = 'pl-message-container'\r\n    document.body.appendChild(messagesContainer)\r\n  }\r\n  const vm = createVNode(\r\n    MessageConstructor,\r\n    isObject(options) ? { ...options } : null,\r\n    (isFunction(options) || isVNode(options))\r\n      ? {\r\n          headless: isFunction(options)\r\n            ? options\r\n            : () => options,\r\n        }\r\n      : null,\r\n  )\r\n  const container = document.createElement('div')\r\n  render(vm, container)\r\n  messagesContainer.appendChild(container.firstChild!)\r\n}\r\n"],"names":["defineComponent","useToggle","computed","_createVNode","Alert","Transition","animation","createVNode","isObject","isFunction","isVNode","render"],"mappings":";;;;;;;AAMA,MAAM,eAAe;AAAA,EACnB,SAAS;AAAA,EACT,UAAU;AAAA,IACR,MAAM;AAAA,IACN,SAAS,MAAM,CAAE;AAAA,EAClB;AAAA,EACD,OAAO;AAAA,IACL,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA,EACD,WAAW;AAAA,IACT,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AACH;AACY,MAAC,qBAAqCA,oBAAAA,gBAAgB;AAAA,EAChE,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM,OAAO;AAAA,IACX;AAAA,EACJ,GAAK;AACD,UAAM,UAAUC,UAAAA;AAChB,YAAQ,KAAI;AACZ,UAAM,aAAa,QAAQ,MAAM;AAAA,MAC/B,OAAO;AAAA,IACb,CAAK;AACD,UAAM,OAAOC,IAAAA,SAAS,MAAM;AAC1B,YAAM,QAAQ;AAAA,QACZ,MAAM;AAAA,QACN,SAAS;AAAA,QACT,SAAS;AAAA,QACT,QAAQ;AAAA,MAChB;AACM,aAAO,MAAM,MAAM,KAAK;AAAA,IAC9B,CAAK;AACD,UAAM,qBAAqB,MAAMC,IAAY,YAACC,iBAAO;AAAA,MACnD,QAAQ;AAAA,MACR,QAAQ,KAAK;AAAA,MACb,SAAS,MAAM;AAAA,MACf,eAAe,MAAM;AAAA,MACrB,YAAY;AAAA,IACb,GAAE,IAAI;AACP,WAAO,MAAMD,IAAY,YAACE,gBAAY;AAAA,MACpC,sBAAsBC,MAAS,UAAC,aAAa;AAAA,MAC7C,sBAAsBA,MAAS,UAAC,YAAY;AAAA,MAC5C,UAAU;AAAA,IAChB,GAAO;AAAA,MACD,SAAS,MAAM;;AAAA,gBAAC,QAAQ,MAAM,UAAQ,WAAM,aAAN,+BAAmB,OAAM,mBAAkB,IAAK,IAAI;AAAA;AAAA,IAChG,CAAK;AAAA,EACF;AACH,CAAC;AACD,IAAI,oBAAoB;AACxB,MAAe,UAAC,aAAW;AACzB,MAAI,CAAC,mBAAmB;AACtB,wBAAoB,SAAS,cAAc,KAAK;AAChD,sBAAkB,YAAY;AAC9B,aAAS,KAAK,YAAY,iBAAiB;AAAA,EAC5C;AACD,QAAM,KAAKC,IAAW,YAAC,oBAAoBC,kBAAQ,SAAC,OAAO,IAAI;AAAA,IAC7D,GAAG;AAAA,EACP,IAAM,MAAMC,kBAAAA,WAAW,OAAO,KAAKC,IAAO,QAAC,OAAO,IAAI;AAAA,IAClD,UAAUD,kBAAAA,WAAW,OAAO,IAAI,UAAU,MAAM;AAAA,EACjD,IAAG,IAAI;AACR,QAAM,YAAY,SAAS,cAAc,KAAK;AAC9CE,aAAO,IAAI,SAAS;AACpB,oBAAkB,YAAY,UAAU,UAAU;AACpD;;;"}