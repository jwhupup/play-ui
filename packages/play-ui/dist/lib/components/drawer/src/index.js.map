{"version":3,"file":"index.js","sources":["../../../../../src/components/drawer/src/index.tsx"],"sourcesContent":["import { type ExtractPropTypes, type PropType, Teleport, Transition, computed, defineComponent } from 'vue'\r\nimport { type ToggleHandler } from '../../../composables'\r\nimport { useModal } from '../../../composables'\r\nimport { animation, uppercaseFirstWord } from '../../../utils'\r\nimport Button from '../../button'\r\n\r\nexport interface DarwerInstance extends ToggleHandler, HTMLElement {}\r\nexport type DarwerProps = ExtractPropTypes<typeof darwerProps>\r\ntype ShakeOffProp = 'x-button' | 'mask' | 'header'\r\n\r\nconst darwerProps = {\r\n  shakeOff: {\r\n    type: Array as PropType<ShakeOffProp[]>,\r\n    default: () => [],\r\n  },\r\n  placement: {\r\n    type: String as PropType<'top' | 'bottom' | 'left' | 'right'>,\r\n    default: 'left',\r\n  },\r\n  fullscreen: Boolean,\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'Drawer',\r\n  props: darwerProps,\r\n  emits: [\r\n    'open',\r\n    'close',\r\n  ],\r\n  setup(props, { slots, emit }) {\r\n    const { modal } = useModal(emit)\r\n\r\n    const style = computed(() => {\r\n      if (props.placement === 'left' || props.placement === 'right') {\r\n        return {\r\n          minWidth: props.fullscreen ? '100%' : '350px',\r\n          top: 0,\r\n          bottom: 0,\r\n          [props.placement]: 0,\r\n        }\r\n      }\r\n      else if (props.placement === 'top' || props.placement === 'bottom') {\r\n        return {\r\n          height: props.fullscreen ? '100%' : 0,\r\n          minHeight: '350px',\r\n          left: 0,\r\n          right: 0,\r\n          [props.placement]: 0,\r\n        }\r\n      }\r\n      return {}\r\n    })\r\n\r\n    const animate = computed(() => {\r\n      const inSuffix = uppercaseFirstWord(props.placement === 'top'\r\n        ? 'down'\r\n        : props.placement === 'bottom'\r\n          ? 'up'\r\n          : props.placement,\r\n      )\r\n      const outSuffix = uppercaseFirstWord(props.placement === 'top'\r\n        ? 'up'\r\n        : props.placement === 'bottom'\r\n          ? 'down'\r\n          : props.placement,\r\n      )\r\n      return {\r\n        enter: animation(`slideIn${inSuffix}`),\r\n        leave: animation(`slideOut${outSuffix}`),\r\n      }\r\n    })\r\n\r\n    const isShake = (prop: ShakeOffProp) => props.shakeOff.includes(prop)\r\n\r\n    const renderMask = () => {\r\n      if (!isShake('mask'))\r\n        return <div class='pl-mask' v-show={modal.state.value} />\r\n    }\r\n\r\n    const renderDrawer = () => {\r\n      const renderHeader = () => {\r\n        if (isShake('header'))\r\n          return\r\n\r\n        const renderXButton = () => {\r\n          if (!isShake('x-button')) {\r\n            return (\r\n              <Button\r\n                type='link'\r\n                state='info'\r\n                icon-left='x-lg'\r\n                onClick={modal.close}\r\n              />\r\n            )\r\n          }\r\n        }\r\n\r\n        return (\r\n          <header>\r\n            <h3>Darwer header</h3>\r\n            {renderXButton()}\r\n          </header>\r\n        )\r\n      }\r\n      return (\r\n        <div class='pl-darwer-default'>\r\n          {renderHeader()}\r\n          <section>\r\n            {slots.default?.()}\r\n          </section>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return () => (\r\n      <Teleport to='body'>\r\n        {renderMask()}\r\n        <Transition\r\n          enter-active-class={animation(animate.value.enter)}\r\n          leave-active-class={animation(animate.value.leave)}\r\n          appear\r\n        >\r\n          <div\r\n            ref={modal}\r\n            class='pl-darwer'\r\n            style={style.value}\r\n            v-show={modal.state.value}\r\n          >\r\n            {slots.headless?.() || renderDrawer()}\r\n          </div>\r\n       </Transition>\r\n      </Teleport>\r\n    )\r\n  },\r\n})\r\n"],"names":["defineComponent","useModal","computed","uppercaseFirstWord","animation","_withDirectives","_createVNode","_vShow","Button","_createTextVNode","Teleport","Transition"],"mappings":";;;;;;AAKA,MAAM,cAAc;AAAA,EAClB,UAAU;AAAA,IACR,MAAM;AAAA,IACN,SAAS,MAAM,CAAE;AAAA,EAClB;AAAA,EACD,WAAW;AAAA,IACT,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA,EACD,YAAY;AACd;AACA,MAAe,SAAgBA,oCAAgB;AAAA,EAC7C,MAAM;AAAA,EACN,OAAO;AAAA,EACP,OAAO,CAAC,QAAQ,OAAO;AAAA,EACvB,MAAM,OAAO;AAAA,IACX;AAAA,IACA;AAAA,EACJ,GAAK;AACD,UAAM;AAAA,MACJ;AAAA,IACN,IAAQC,SAAAA,SAAS,IAAI;AACjB,UAAM,QAAQC,IAAAA,SAAS,MAAM;AAC3B,UAAI,MAAM,cAAc,UAAU,MAAM,cAAc,SAAS;AAC7D,eAAO;AAAA,UACL,UAAU,MAAM,aAAa,SAAS;AAAA,UACtC,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,CAAC,MAAM,SAAS,GAAG;AAAA,QAC7B;AAAA,MACA,WAAiB,MAAM,cAAc,SAAS,MAAM,cAAc,UAAU;AACpE,eAAO;AAAA,UACL,QAAQ,MAAM,aAAa,SAAS;AAAA,UACpC,WAAW;AAAA,UACX,MAAM;AAAA,UACN,OAAO;AAAA,UACP,CAAC,MAAM,SAAS,GAAG;AAAA,QAC7B;AAAA,MACO;AACD,aAAO;IACb,CAAK;AACD,UAAM,UAAUA,IAAAA,SAAS,MAAM;AAC7B,YAAM,WAAWC,MAAkB,mBAAC,MAAM,cAAc,QAAQ,SAAS,MAAM,cAAc,WAAW,OAAO,MAAM,SAAS;AAC9H,YAAM,YAAYA,MAAkB,mBAAC,MAAM,cAAc,QAAQ,OAAO,MAAM,cAAc,WAAW,SAAS,MAAM,SAAS;AAC/H,aAAO;AAAA,QACL,OAAOC,MAAAA,UAAU,UAAU,UAAU;AAAA,QACrC,OAAOA,MAAAA,UAAU,WAAW,WAAW;AAAA,MAC/C;AAAA,IACA,CAAK;AACD,UAAM,UAAU,UAAQ,MAAM,SAAS,SAAS,IAAI;AACpD,UAAM,aAAa,MAAM;AACvB,UAAI,CAAC,QAAQ,MAAM;AAAG,eAAOC,IAAe,eAACC,IAAY,YAAC,OAAO;AAAA,UAC/D,SAAS;AAAA,QACjB,GAAS,IAAI,GAAG,CAAC,CAACC,IAAM,OAAE,MAAM,MAAM,KAAK,CAAC,CAAC;AAAA,IAC7C;AACI,UAAM,eAAe,MAAM;;AACzB,YAAM,eAAe,MAAM;AACzB,YAAI,QAAQ,QAAQ;AAAG;AACvB,cAAM,gBAAgB,MAAM;AAC1B,cAAI,CAAC,QAAQ,UAAU,GAAG;AACxB,mBAAOD,IAAAA,YAAaE,QAAAA,UAAQ;AAAA,cAC1B,QAAQ;AAAA,cACR,SAAS;AAAA,cACT,aAAa;AAAA,cACb,WAAW,MAAM;AAAA,YAClB,GAAE,IAAI;AAAA,UACR;AAAA,QACX;AACQ,eAAOF,IAAY,YAAC,UAAU,MAAM,CAACA,IAAAA,YAAa,MAAM,MAAM,CAACG,IAAAA,gBAAiB,eAAe,CAAC,CAAC,GAAG,cAAa,CAAE,CAAC;AAAA,MAC5H;AACM,aAAOH,IAAAA,YAAa,OAAO;AAAA,QACzB,SAAS;AAAA,MACV,GAAE,CAAC,aAAY,GAAIA,IAAY,YAAC,WAAW,MAAM,EAAC,WAAM,YAAN,8BAAiB,CAAC,CAAC,CAAC;AAAA,IAC7E;AACI,WAAO,MAAMA,IAAY,YAACI,cAAU;AAAA,MAClC,MAAM;AAAA,IACZ,GAAO;AAAA,MACD,SAAS,MAAM,CAAC,cAAcJ,IAAAA,YAAaK,IAAAA,YAAY;AAAA,QACrD,sBAAsBP,MAAS,UAAC,QAAQ,MAAM,KAAK;AAAA,QACnD,sBAAsBA,MAAS,UAAC,QAAQ,MAAM,KAAK;AAAA,QACnD,UAAU;AAAA,MAClB,GAAS;AAAA,QACD,SAAS,MAAM;;AAAA,kBAACC,mBAAgBC,IAAAA,YAAa,OAAO;AAAA,YAClD,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS,MAAM;AAAA,UAChB,GAAE,GAAC,WAAM,aAAN,mCAAsB,aAAc,CAAA,CAAC,GAAG,CAAC,CAACC,IAAAA,OAAQ,MAAM,MAAM,KAAK,CAAC,CAAC,CAAC;AAAA;AAAA,MAClF,CAAO,CAAC;AAAA,IACR,CAAK;AAAA,EACF;AACH,CAAC;;"}