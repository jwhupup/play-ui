{"version":3,"file":"table.js","sources":["../../../../../src/components/table/src/table.ts"],"sourcesContent":["import type { Ref } from 'vue'\r\nimport { onMounted, ref, watchEffect } from 'vue'\r\n\r\nimport type { TableConfig, TableHeaderCell, TableProps } from '../../component'\r\n\r\nexport const config = ref<TableConfig>({\r\n  striped: false,\r\n  width: 0,\r\n  columns: [],\r\n  data: [],\r\n})\r\n\r\nexport const genTableConfig = (props: TableProps, el: Ref<HTMLElement | undefined>) => {\r\n  let index = 0\r\n  let totalWidth = 0\r\n\r\n  watchEffect(() => {\r\n    config.value.width = props.width ?? 180\r\n    config.value.striped = props.striped ?? false\r\n    config.value.data = props.data\r\n  })\r\n  config.value.columns.length = 0\r\n  genColumnConfig(props.header)\r\n\r\n  onMounted(() => {\r\n    const scrollbarWidth = 7\r\n    config.value.columns.forEach((column, index, array) => {\r\n      if (index === array.length - 1) {\r\n        el.value?.style.setProperty(\r\n            `--pl-table-column-${column.index}-width`,\r\n            `${totalWidth > el.value?.clientWidth ? config.value.width : el.value?.clientWidth - totalWidth - scrollbarWidth}px`,\r\n        )\r\n      }\r\n      else {\r\n        totalWidth += column.width ?? config.value.width\r\n        el.value?.style.setProperty(`--pl-table-column-${column.index}-width`, `${column.width ?? config.value.width}px`)\r\n      }\r\n    })\r\n  })\r\n\r\n  function genColumnConfig(header: TableHeaderCell[]) {\r\n    header.forEach((cell) => {\r\n      if (cell.children) {\r\n        genColumnConfig(cell.children)\r\n      }\r\n      else {\r\n        cell.index = index++\r\n        config.value.columns.push({ index, ...cell })\r\n      }\r\n    })\r\n  }\r\n}\r\n"],"names":["ref","watchEffect","onMounted","index"],"mappings":";;;AAKO,MAAM,SAASA,IAAAA,IAAiB;AAAA,EACrC,SAAS;AAAA,EACT,OAAO;AAAA,EACP,SAAS,CAAC;AAAA,EACV,MAAM,CAAC;AACT,CAAC;AAEY,MAAA,iBAAiB,CAAC,OAAmB,OAAqC;AACrF,MAAI,QAAQ;AACZ,MAAI,aAAa;AAEjBC,MAAAA,YAAY,MAAM;AACT,WAAA,MAAM,QAAQ,MAAM,SAAS;AAC7B,WAAA,MAAM,UAAU,MAAM,WAAW;AACjC,WAAA,MAAM,OAAO,MAAM;AAAA,EAAA,CAC3B;AACM,SAAA,MAAM,QAAQ,SAAS;AAC9B,kBAAgB,MAAM,MAAM;AAE5BC,MAAAA,UAAU,MAAM;AACd,UAAM,iBAAiB;AACvB,WAAO,MAAM,QAAQ,QAAQ,CAAC,QAAQC,QAAO,UAAU;;AACjDA,UAAAA,WAAU,MAAM,SAAS,GAAG;AAC9B,iBAAG,UAAH,mBAAU,MAAM;AAAA,UACZ,qBAAqB,OAAO;AAAA,UAC5B,GAAG,eAAa,QAAG,UAAH,mBAAU,eAAc,OAAO,MAAM,UAAQ,QAAG,UAAH,mBAAU,eAAc,aAAa;AAAA;AAAA,MACtG,OAEG;AACW,sBAAA,OAAO,SAAS,OAAO,MAAM;AACxC,iBAAA,UAAA,mBAAO,MAAM,YAAY,qBAAqB,OAAO,eAAe,GAAG,OAAO,SAAS,OAAO,MAAM;AAAA,MACzG;AAAA,IAAA,CACD;AAAA,EAAA,CACF;AAED,WAAS,gBAAgB,QAA2B;AAC3C,WAAA,QAAQ,CAAC,SAAS;AACvB,UAAI,KAAK,UAAU;AACjB,wBAAgB,KAAK,QAAQ;AAAA,MAAA,OAE1B;AACH,aAAK,QAAQ;AACb,eAAO,MAAM,QAAQ,KAAK,EAAE,OAAO,GAAG,MAAM;AAAA,MAC9C;AAAA,IAAA,CACD;AAAA,EACH;AACF;;;"}