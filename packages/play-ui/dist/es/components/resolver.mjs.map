{"version":3,"file":"resolver.mjs","sources":["../../../src/components/resolver.ts"],"sourcesContent":["import type {\r\n  ComponentResolver,\r\n  SideEffectsInfo,\r\n} from 'unplugin-vue-components'\r\n\r\nexport interface PlayResolverOptions {\r\n  importStyle?: boolean | 'less'\r\n  from?: string\r\n}\r\n\r\nexport const isSSR = Boolean(\r\n  process.env.SSR\r\n    || process.env.SSG\r\n    || process.env.VITE_SSR\r\n    || process.env.VITE_SSG,\r\n)\r\n\r\nexport function kebabCase(key: string) {\r\n  const result = key.replace(/([A-Z])/g, ' $1').trim()\r\n  return result.split(' ').join('-').toLowerCase()\r\n}\r\n\r\nfunction getSideEffects(\r\n  dirName: string,\r\n  options: PlayResolverOptions,\r\n): SideEffectsInfo | undefined {\r\n  const { importStyle = true } = options\r\n\r\n  if (!importStyle || isSSR)\r\n    return\r\n\r\n  const noStyleComps: string[] = [\r\n    'tab-pane',\r\n    'pagination',\r\n    'breadcrumb',\r\n    'virtual-list-item',\r\n  ]\r\n\r\n  if (noStyleComps.includes(dirName))\r\n    return\r\n\r\n  if (importStyle === 'less') {\r\n    return [\r\n      'play-ui/styles/base.less',\r\n      `play-ui/components/${dirName}/src/index.less`,\r\n    ]\r\n  }\r\n\r\n  return [`play-ui/dist/styles/${dirName}/src/index.js`]\r\n}\r\n\r\nexport function PlayResolver(\r\n  options: PlayResolverOptions = {},\r\n): ComponentResolver {\r\n  const { from = 'play-ui' } = options\r\n  return {\r\n    type: 'component',\r\n    resolve: (name: string) => {\r\n      if (name.startsWith('Pl')) {\r\n        const partialName = name.slice(2)\r\n        return {\r\n          name,\r\n          from,\r\n          sideEffects: getSideEffects(kebabCase(partialName), options),\r\n        }\r\n      }\r\n    },\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAUO,MAAM,QAAQ;AAAA,EACnB,CAAA,EAAA,OAAY,GAAA,OACC,GAAA,YACA,CAAA,EAAA;AAEf;AAEO,SAAS,UAAU,KAAa;AACrC,QAAM,SAAS,IAAI,QAAQ,YAAY,KAAK,EAAE;AAC9C,SAAO,OAAO,MAAM,GAAG,EAAE,KAAK,GAAG,EAAE;AACrC;AAEA,SAAS,eACP,SACA,SAC6B;AACvB,QAAA,EAAE,cAAc,KAAS,IAAA;AAE/B,MAAI,CAAC,eAAe;AAClB;AAEF,QAAM,eAAyB;AAAA,IAC7B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAGE,MAAA,aAAa,SAAS,OAAO;AAC/B;AAEF,MAAI,gBAAgB,QAAQ;AACnB,WAAA;AAAA,MACL;AAAA,MACA,sBAAsB;AAAA,IAAA;AAAA,EAE1B;AAEO,SAAA,CAAC,uBAAuB,sBAAsB;AACvD;AAEgB,SAAA,aACd,UAA+B,IACZ;AACb,QAAA,EAAE,OAAO,UAAc,IAAA;AACtB,SAAA;AAAA,IACL,MAAM;AAAA,IACN,SAAS,CAAC,SAAiB;AACrB,UAAA,KAAK,WAAW,IAAI,GAAG;AACnB,cAAA,cAAc,KAAK,MAAM,CAAC;AACzB,eAAA;AAAA,UACL;AAAA,UACA;AAAA,UACA,aAAa,eAAe,UAAU,WAAW,GAAG,OAAO;AAAA,QAAA;AAAA,MAE/D;AAAA,IACF;AAAA,EAAA;AAEJ;"}