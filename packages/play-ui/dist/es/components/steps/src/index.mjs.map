{"version":3,"file":"index.mjs","sources":["../../../../../src/components/steps/src/index.tsx"],"sourcesContent":["import type { PropType, Ref } from 'vue'\r\nimport { defineComponent } from 'vue'\r\nimport { useExpose, useStep } from '../../../composables'\r\nimport Button from '../../button'\r\nimport Icon from '../../icon'\r\n\r\nexport interface StepsItem {\r\n  name: string\r\n  description?: string\r\n  icon?: string\r\n  state?: 'pending' | 'processing' | 'done'\r\n  result?: 'success' | 'fail' | 'exception'\r\n}\r\nexport type StepsToggleOptions = Pick<StepsItem, 'state' | 'result'>\r\nexport type StepsInstance = HTMLElement & {\r\n  current: Ref<number>\r\n  toggle: (stepIndex: number, options: StepsToggleOptions) => any\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'Steps',\r\n  props: {\r\n    modelValue: {\r\n      type: Array as PropType<StepsItem[]>,\r\n      require: true,\r\n    },\r\n    vertical: Boolean,\r\n  },\r\n  emits: ['update:modelValue'],\r\n  setup(props, { emit }) {\r\n    const { steps, current, toggle: _toggle } = useStep<StepsItem>(props.modelValue!, emit)\r\n\r\n    const toggle = (stepIndex: number, options: StepsToggleOptions) => {\r\n      steps.value[stepIndex] = Object.assign(steps.value[stepIndex], options)\r\n      if (steps.value[stepIndex].state !== 'pending') {\r\n        steps.value[stepIndex - 1].state = 'done'\r\n        steps.value[stepIndex - 1].result = 'success'\r\n      }\r\n\r\n      if (steps.value[stepIndex].result === 'success' || !steps.value[stepIndex].result)\r\n        steps.value[stepIndex + 1].state = 'processing'\r\n\r\n      _toggle(stepIndex)\r\n    }\r\n\r\n    useExpose({\r\n      current,\r\n      toggle,\r\n    })\r\n\r\n    return () => (\r\n      <div class={['pl-steps', props.vertical && '__vertical']}>\r\n        {steps.value?.map((step, index) => (\r\n          <>\r\n            <div class={['pl-steps-item', props.vertical && '__vertical']}>\r\n              <Button\r\n                type={\r\n                  step.state === 'processing'\r\n                    ? 'outline'\r\n                    : step.state === 'done'\r\n                      ? 'solid'\r\n                      : 'white'\r\n                }\r\n                state={\r\n                  step.state === 'done'\r\n                    ? step.result === 'exception'\r\n                      ? 'warning'\r\n                      : step.result === 'fail'\r\n                        ? 'danger'\r\n                        : 'success'\r\n                    : 'primary'\r\n                }\r\n                size='small'\r\n                shape='circle'\r\n              >\r\n                {\r\n                  step.icon\r\n                    ? <Icon name={step.icon} />\r\n                    : index + 1\r\n                }\r\n              </Button>\r\n              <div class={['pl-steps-content', props.vertical && '__vertical']}>\r\n                <div class='pl-steps-item-name'>{step.name}</div>\r\n                <div class='pl-steps-item-description'>{step.description}</div>\r\n              </div>\r\n            </div>\r\n            {index + 1 !== steps.value?.length && <div class={['pl-steps-item-pipe', props.vertical && '__vertical']} />}\r\n          </>\r\n        ))}\r\n      </div>\r\n    )\r\n  },\r\n})\r\n"],"names":["_createVNode","_Fragment","Button","Icon","_a"],"mappings":";;;;;AAKA,MAAe,QAAgB,gCAAgB;AAAA,EAC7C,MAAM;AAAA,EACN,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,UAAU;AAAA,EACX;AAAA,EACD,OAAO,CAAC,mBAAmB;AAAA,EAC3B,MAAM,OAAO;AAAA,IACX;AAAA,EACJ,GAAK;AACD,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,IACT,IAAG,QAAQ,MAAM,YAAY,IAAI;AAClC,UAAM,SAAS,CAAC,WAAW,YAAY;AACrC,YAAM,MAAM,SAAS,IAAI,OAAO,OAAO,MAAM,MAAM,SAAS,GAAG,OAAO;AACtE,UAAI,MAAM,MAAM,SAAS,EAAE,UAAU,WAAW;AAC9C,cAAM,MAAM,YAAY,CAAC,EAAE,QAAQ;AACnC,cAAM,MAAM,YAAY,CAAC,EAAE,SAAS;AAAA,MACrC;AACD,UAAI,MAAM,MAAM,SAAS,EAAE,WAAW,aAAa,CAAC,MAAM,MAAM,SAAS,EAAE;AAAQ,cAAM,MAAM,YAAY,CAAC,EAAE,QAAQ;AACtH,cAAQ,SAAS;AAAA,IACvB;AACI,cAAU;AAAA,MACR;AAAA,MACA;AAAA,IACN,CAAK;AACD,WAAO,MAAA;;AAAMA,yBAAa,OAAO;AAAA,QAC/B,SAAS,CAAC,YAAY,MAAM,YAAY,YAAY;AAAA,MACrD,GAAE,EAAC,WAAM,UAAN,mBAAa,IAAI,CAAC,MAAM,UAAUA;;AAAAA,2BAAaC,UAAW,MAAM,CAACD,YAAa,OAAO;AAAA,UACvF,SAAS,CAAC,iBAAiB,MAAM,YAAY,YAAY;AAAA,QAC/D,GAAO,CAACA,YAAaE,UAAQ;AAAA,UACvB,QAAQ,KAAK,UAAU,eAAe,YAAY,KAAK,UAAU,SAAS,UAAU;AAAA,UACpF,SAAS,KAAK,UAAU,SAAS,KAAK,WAAW,cAAc,YAAY,KAAK,WAAW,SAAS,WAAW,YAAY;AAAA,UAC3H,QAAQ;AAAA,UACR,SAAS;AAAA,QACf,GAAO;AAAA,UACD,SAAS,MAAM,CAAC,KAAK,OAAOF,YAAaG,QAAM;AAAA,YAC7C,QAAQ,KAAK;AAAA,UACrB,GAAS,IAAI,IAAI,QAAQ,CAAC;AAAA,QAC1B,CAAK,GAAGH,YAAa,OAAO;AAAA,UACtB,SAAS,CAAC,oBAAoB,MAAM,YAAY,YAAY;AAAA,QAClE,GAAO,CAACA,YAAa,OAAO;AAAA,UACtB,SAAS;AAAA,QACV,GAAE,CAAC,KAAK,IAAI,CAAC,GAAGA,YAAa,OAAO;AAAA,UACnC,SAAS;AAAA,QACV,GAAE,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,QAAMI,MAAA,MAAM,UAAN,gBAAAA,IAAa,WAAUJ,YAAa,OAAO;AAAA,UACnF,SAAS,CAAC,sBAAsB,MAAM,YAAY,YAAY;AAAA,QAC/D,GAAE,IAAI,CAAC,CAAC;AAAA,QAAE,CAAC;AAAA;AAAA,EACb;AACH,CAAC;"}